<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" dir="ltr" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

		
				<meta name="keywords" content="N900 USB router,Extras-devel,Kernel Power,Nokia N900,Root access,Terminal">
		<link rel="shortcut icon" href="favicon.ico">
		<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.maemo.org/opensearch_desc.php" title="maemo.org wiki (English)">
<link rel="alternate" type="application/rss+xml" title="maemo.org wiki RSS Feed" href="http://wiki.maemo.org/index.php?title=Special:Recentchanges&amp;feed=rss">
<link rel="alternate" type="application/atom+xml" title="maemo.org wiki Atom Feed" href="http://wiki.maemo.org/index.php?title=Special:Recentchanges&amp;feed=atom">
		<title>N900 USB router - maemo.org wiki</title>
        
        
        <!--[if lte IE 6]>
            <link rel="stylesheet" href="http://static.maemo.org/style_maemo2009/css/ie.css" type="text/css" media="screen">
        <![endif]-->


        
        
		
		
		<meta http-equiv="imagetoolbar" content="no"><!--[endif]---->
		
		
                
		
		<!-- Head Scripts -->
		
		
		
	
<link rel="stylesheet" type="text/css" href="index.css" media="all">
</head>
<body class="mediawiki ns-0 ltr page-N900_USB_router">
        <div id="container">
            <div id="header">
                <div id="logo">
                                        <a href="http://maemo.org/"><img src="logo.jpg" title="Maemo.org" alt="Maemo.org"></a>
                </div><!-- logo -->

	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="http://wiki.maemo.org/index.php?title=Special:Userlogin&amp;returnto=N900_USB_router" title="You are encouraged to log in, it is not mandatory however. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
            </div>
        </div>
            <div id="navigation">
                <div id="navigation-left-wrapper">

                    <div id="navigation-right-wrapper">

                        <ul>
                            <li><a href="http://maemo.org/intro/">Intro</a></li>
                            <li><a href="http://maemo.org/downloads/">Downloads</a></li>
                            <li class="selected"><a href="http://maemo.org/community/">Community</a></li>
                            <li><a href="http://maemo.org/development/">Development</a></li>
                            <li><a href="http://maemo.org/news/">News</a></li>
                            <li><a href="http://talk.maemo.org/">TALK</a></li>
                        </ul>


		<div id="search">
			<form action="http://wiki.maemo.org/Special:Search" id="searchform">
				<input id="searchInput" name="search" title="Search maemo.org wiki [f]" accesskey="f" value="" type="text">
				<input name="go" class="submit" id="searchGoButton" value="Go" title="Go to a page with this exact name if exists" type="submit">&nbsp;
<!--				<input type='submit' name="fulltext" class="submit" id="mw-searchButton" value="Go" title="Search the pages for this text" /> &nbsp; -->
			</form>
		</div>


                    </div>
                </div>
            </div><!-- /navigation -->
            <div id="breadcrumb"></div>
            <div id="content">
                        

<!--	<div id="globalWrapper">
		<div id="column-content">
	<div id="content2"> 


		<a name="top" id="top"></a>
				<h1 class="firstHeading">N900 USB router</h1>
		<div id="bodyContent">
-->

      
<!-- sidebar --> 
                  <div id="sidebar">
		<div id="nav-sub">

		<div class="portlet" id="p-navigation">
		<h3>Navigation</h3>
			<ul>
				<li id="n-mainpage"><a href="http://wiki.maemo.org/Main_Page" title="Visit the Main Page [z]" accesskey="z">Main Page</a></li>
				<li id="n-recentchanges"><a href="http://wiki.maemo.org/Special:Recentchanges" title="The list of recent changes in the wiki. [r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="http://wiki.maemo.org/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
				<li id="n-help"><a href="http://wiki.maemo.org/Help:Contents" title="The place to find out.">Help</a></li>
				<li id="n-advancedsearch"><a href="http://wiki.maemo.org/Special:Search">Advanced search</a></li>
			</ul>
	</div>
	


	<div id="p-cactions" class="portlet">
		<h3>Views</h3>
			<ul class="fi_protie_navigation">
					 <li id="ca-nstab-main" class="selected"><a href="http://wiki.maemo.org/N900_USB_router" title="View the content page [c]" accesskey="c">Page</a></li>
					 <li id="ca-talk" class="new"><a href="http://wiki.maemo.org/index.php?title=Talk:N900_USB_router&amp;action=edit" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
					 <li id="ca-edit"><a href="http://wiki.maemo.org/index.php?title=N900_USB_router&amp;action=edit" title="You can edit this page. Please use the preview button before saving. [e]" accesskey="e">Edit</a></li>
					 <li id="ca-history"><a href="http://wiki.maemo.org/index.php?title=N900_USB_router&amp;action=history" title="Past versions of this page. [h]" accesskey="h">History</a></li>
				</ul>
	</div>


    
		</div>

               </div>
<!-- sidebar --> 
<div id="main">
<div id="main-wrapper">

			            <h1 class="firstHeading">N900 USB router</h1>
			<!-- start content -->
			<p>When the only internet link is the <a href="http://wiki.maemo.org/Nokia_N900" title="Nokia N900">N900</a>, how to connect a laptop to it and use it to connect to the net?
</p><p>There is two modes for doing this: Using the <a href="http://wiki.maemo.org/Nokia_N900" title="Nokia N900">N900</a> as a dumb mobile broadband modem to the phone network, or set up full USB networking between the computer and the N900 using the N900 as a router to whatever network it's connected to (phone, wlan, etc..)
</p><p>The modem model should be available mostly automatically on most OS'es when you connect the phone over USB (Bluethooth also possible with an addon). Windows may need the PC Suite installed however. This however only works for phone network connections, not wlan connections.
</p><p>The other variant using full USB networking support is not enabled in the default USB profile of the N900 and needs some tweaking to be enabled, but once enabled it gives you full network access to both the N900 and connection sharing of whatever Internet connection the N900 currently have (phone, wlan, etc...)
</p>
<a name="On_the_N900"></a><h2><span class="editsection">[<a href="http://wiki.maemo.org/index.php?title=N900_USB_router&amp;action=edit&amp;section=1" title="Edit section: On the N900">edit</a>]</span> <span class="mw-headline"> On the N900 </span></h2>
<ol>
<li><a href="http://wiki.maemo.org/Extras-devel#How_to_activate_Extras-devel" title="Extras-devel">Enable extras-devel</a></li>
<li>Install <a href="http://maemo.org/packages/view/iptables/" class="external text" title="http://maemo.org/packages/view/iptables/" rel="nofollow">iptables</a> at a <a href="http://wiki.maemo.org/Terminal" title="Terminal">terminal</a> with <a href="http://wiki.maemo.org/Root_access" title="Root access">root access</a>:<pre>apt-get install iptables</pre></li>
<li>Install <a href="http://maemo.org/packages/view/kernel-power-settings/" class="external text" title="http://maemo.org/packages/view/kernel-power-settings/" rel="nofollow">kernel-power-settings</a> (see <a href="http://wiki.maemo.org/Kernel_Power#Installation_of_the_stable_kernel_from_extras" title="Kernel Power">the detailed installation instructions</a>):<pre>apt-get install kernel-power-settings</pre></li>
<li>Setup iptables to allow forwarding:
<pre>echo 1 &gt; /proc/sys/net/ipv4/ip_forward
iptables -t nat -A POSTROUTING -o wlan0 -j MASQUERADE
iptables -t nat -A POSTROUTING -o gprs0 -j MASQUERADE
</pre></li>
<li>Check the IP address for USB networking:<pre>cat /etc/network/interfaces</pre>
<pre>iface usb0 inet static
address 192.168.3.15
netmask 255.255.255.0
</pre>
</li>
<li>Bring the interface UP:<pre>ifup usb0
</pre>
</li>
<li>Start dnsmasq on the usb0 interface to provide DHCP &amp; DNS<pre>dnsmasq -I lo -z -a 192.168.3.15 -F 192.168.3.64,192.168.3.127
</pre>
</li></ol>
<p>Once you have verified this works then you can make the settings permanent by adding the needed commands to /usr/sbin/pcsuite-enable.sh just before "exit 0" line at the end of the file.
</p>
<pre>echo 1 &gt; /proc/sys/net/ipv4/ip_forward
iptables -t nat -F POSTROUTING
iptables -t nat -A POSTROUTING -o wlan0 -j MASQUERADE
iptables -t nat -A POSTROUTING -o gprs0 -j MASQUERADE
ifup usb0
dnsmasq -I lo -z -a 192.168.3.15 -F 192.168.3.64,192.168.3.127
</pre>
<p>This will make the needed settings automatically enabled when you select "PC Suite" mode on the N900 when connecting the USB cable.
</p>
<a name="On_the_laptop"></a><h2><span class="editsection">[<a href="http://wiki.maemo.org/index.php?title=N900_USB_router&amp;action=edit&amp;section=2" title="Edit section: On the laptop">edit</a>]</span> <span class="mw-headline"> On the laptop </span></h2>
<p>The networking configuration on the PC side should be almost automatic on most OS:es. If needed configure your PC to use DHCP on the USB interface.
</p>
<a name="For_Non-Power_Users_On_Windows"></a><h2><span class="editsection">[<a href="http://wiki.maemo.org/index.php?title=N900_USB_router&amp;action=edit&amp;section=3" title="Edit section: For Non-Power Users On Windows">edit</a>]</span> <span class="mw-headline"> For Non-Power Users On Windows </span></h2>
<p>The <a href="http://www.nokiausa.com/get-support-and-software/software/nokia-pc-suites/compatibility-and-download" class="external text" title="http://www.nokiausa.com/get-support-and-software/software/nokia-pc-suites/compatibility-and-download" rel="nofollow">Nokia PC Suite</a> also provides this functionality for Windows users. Once it is set up, click on the green globe icon to get started - or you can just run "OneTouchAccess" from the PC Suite program files directory (<code>C:\Program Files\Nokia\Nokia PC Suite 7\</code> by default on Windows XP)
</p><p>Note: Reportedly PC Suite do not provide USB networking as described in this article. Instead it sets up dialup networking over USB, using the phone as a wireless broadband modem. Fine for Internet access, but perhaps not what you want for advanced uses where you want to be able to communicate with the N900 as well, not just Internet.
</p>
<!-- 
NewPP limit report
Preprocessor node count: 37/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
#ifexist count: 0/100
-->

<!-- Saved in parser cache with key mediawiki-mw_:pcache:idhash:4300-0!1!0!!en!2 and timestamp 20120702132525 -->
<div class="printfooter">
Retrieved from "<a href="http://wiki.maemo.org/N900_USB_router">http://wiki.maemo.org/N900_USB_router</a>"</div>
			<div id="catlinks"><p class="catlinks"><a href="http://wiki.maemo.org/Special:Categories" title="Special:Categories">Categories</a>: <span dir="ltr"><a href="http://wiki.maemo.org/Category:Connectivity" title="Category:Connectivity">Connectivity</a></span> | <span dir="ltr"><a href="http://wiki.maemo.org/Category:N900" title="Category:N900">N900</a></span> | <span dir="ltr"><a href="http://wiki.maemo.org/Category:USB" title="Category:USB">USB</a></span> | <span dir="ltr"><a href="http://wiki.maemo.org/Category:Power_users" title="Category:Power users">Power users</a></span></p></div>
			<!-- end content -->



                    </div><!-- /main-wrapper -->
                </div><!-- /main --><!-- content end -->

			<div class="visualClear"></div>

        <ul style="clear: left; float: left; display: inline; list-style-type: none;">
<li id="lastmod"> This page was last modified 11:29, 8 July 2010.</li><li id="viewcount">This page has been accessed 10,925 times.</li>      </ul>
			<div class="visualClear"></div>


			<div id="footer">
                <div id="footer-wrapper-left">
                    <div id="footer-wrapper-right">

			<ul>
                                <li class="first"><a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">All Content CC</a></li>
                <li><a href="http://maemo.org/legal/">Legal</a></li>
                				<li class="privacy"><a href="http://wiki.maemo.org/maemo.org_wiki:Privacy_policy" title="maemo.org wiki:Privacy policy">Privacy policy</a></li>
				<li class="about"><a href="http://wiki.maemo.org/maemo.org_wiki:About" title="maemo.org wiki:About">About maemo.org wiki</a></li>
                <li>Powered by <a href="http://www.mediawiki.org/">MediaWiki</a></li>
			</ul>
                    </div>
                </div>
		</div>
		
	
		
</div>
<!-- Served in 1.289 secs. -->

        </div><!-- container -->

    

</body>
</html>
