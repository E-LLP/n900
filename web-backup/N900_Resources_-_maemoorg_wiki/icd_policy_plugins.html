<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" dir="ltr" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

		
				<meta name="keywords" content="ICD Policy Plugins,Documentation/Maemo 5 Developer Guide/Using Connectivity Components/Maemo Connectivity">
		<link rel="shortcut icon" href="favicon.ico">
		<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.maemo.org/opensearch_desc.php" title="maemo.org wiki (English)">
<link rel="alternate" type="application/rss+xml" title="maemo.org wiki RSS Feed" href="http://wiki.maemo.org/index.php?title=Special:Recentchanges&amp;feed=rss">
<link rel="alternate" type="application/atom+xml" title="maemo.org wiki Atom Feed" href="http://wiki.maemo.org/index.php?title=Special:Recentchanges&amp;feed=atom">
		<title>ICD Policy Plugins - maemo.org wiki</title>
        
        
        <!--[if lte IE 6]>
            <link rel="stylesheet" href="http://static.maemo.org/style_maemo2009/css/ie.css" type="text/css" media="screen">
        <![endif]-->


        
        
		
		
		<meta http-equiv="imagetoolbar" content="no"><!--[endif]---->
		
		
                
		
		<!-- Head Scripts -->
		
		
		
	
<link rel="stylesheet" type="text/css" href="icd_policy_plugins.css" media="all">
</head>
<body class="mediawiki ns-0 ltr page-ICD_Policy_Plugins">
        <div id="container">
            <div id="header">
                <div id="logo">
                                        <a href="http://maemo.org/"><img src="logo.jpg" title="Maemo.org" alt="Maemo.org"></a>
                </div><!-- logo -->

	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="http://wiki.maemo.org/index.php?title=Special:Userlogin&amp;returnto=ICD_Policy_Plugins" title="You are encouraged to log in, it is not mandatory however. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
            </div>
        </div>
            <div id="navigation">
                <div id="navigation-left-wrapper">

                    <div id="navigation-right-wrapper">

                        <ul>
                            <li><a href="http://maemo.org/intro/">Intro</a></li>
                            <li><a href="http://maemo.org/downloads/">Downloads</a></li>
                            <li class="selected"><a href="http://maemo.org/community/">Community</a></li>
                            <li><a href="http://maemo.org/development/">Development</a></li>
                            <li><a href="http://maemo.org/news/">News</a></li>
                            <li><a href="http://talk.maemo.org/">TALK</a></li>
                        </ul>


		<div id="search">
			<form action="http://wiki.maemo.org/Special:Search" id="searchform">
				<input id="searchInput" name="search" title="Search maemo.org wiki [f]" accesskey="f" value="" type="text">
				<input name="go" class="submit" id="searchGoButton" value="Go" title="Go to a page with this exact name if exists" type="submit">&nbsp;
<!--				<input type='submit' name="fulltext" class="submit" id="mw-searchButton" value="Go" title="Search the pages for this text" /> &nbsp; -->
			</form>
		</div>


                    </div>
                </div>
            </div><!-- /navigation -->
            <div id="breadcrumb"></div>
            <div id="content">
                        

<!--	<div id="globalWrapper">
		<div id="column-content">
	<div id="content2"> 


		<a name="top" id="top"></a>
				<h1 class="firstHeading">ICD Policy Plugins</h1>
		<div id="bodyContent">
-->

      
<!-- sidebar --> 
                  <div id="sidebar">
		<div id="nav-sub">

		<div class="portlet" id="p-navigation">
		<h3>Navigation</h3>
			<ul>
				<li id="n-mainpage"><a href="http://wiki.maemo.org/Main_Page" title="Visit the Main Page [z]" accesskey="z">Main Page</a></li>
				<li id="n-recentchanges"><a href="http://wiki.maemo.org/Special:Recentchanges" title="The list of recent changes in the wiki. [r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="http://wiki.maemo.org/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
				<li id="n-help"><a href="http://wiki.maemo.org/Help:Contents" title="The place to find out.">Help</a></li>
				<li id="n-advancedsearch"><a href="http://wiki.maemo.org/Special:Search">Advanced search</a></li>
			</ul>
	</div>
	


	<div id="p-cactions" class="portlet">
		<h3>Views</h3>
			<ul class="fi_protie_navigation">
					 <li id="ca-nstab-main" class="selected"><a href="http://wiki.maemo.org/ICD_Policy_Plugins" title="View the content page [c]" accesskey="c">Page</a></li>
					 <li id="ca-talk" class="new"><a href="http://wiki.maemo.org/index.php?title=Talk:ICD_Policy_Plugins&amp;action=edit" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
					 <li id="ca-edit"><a href="http://wiki.maemo.org/index.php?title=ICD_Policy_Plugins&amp;action=edit" title="You can edit this page. Please use the preview button before saving. [e]" accesskey="e">Edit</a></li>
					 <li id="ca-history"><a href="http://wiki.maemo.org/index.php?title=ICD_Policy_Plugins&amp;action=history" title="Past versions of this page. [h]" accesskey="h">History</a></li>
				</ul>
	</div>


    
		</div>

               </div>
<!-- sidebar --> 
<div id="main">
<div id="main-wrapper">

			            <h1 class="firstHeading">ICD Policy Plugins</h1>
			<!-- start content -->
			<p>An Internet Connectivity Daemon policy plugin is a plugin used by the <a href="http://wiki.maemo.org/Documentation/Maemo_5_Developer_Guide/Using_Connectivity_Components/Maemo_Connectivity#Internet_Connectivity_Daemon" title="Documentation/Maemo 5 Developer Guide/Using Connectivity Components/Maemo Connectivity">Internet Connectivity Daemon</a> to decide different things about an internet connection such as whether to connect or disconnect it.
</p><p>By writing a new ICD policy plugin, it should be possible to do things like making one WiFi network take priority over another WiFi network (e.g. your home network taking priority over everything else)
</p><p>The plugins included with Fremantle are (in priority order): (this information comes through GConf and can be changed via the normal GConf configuration-changing tools or tricks)
</p>
<ul><li><code>libicd_policy_merge.so</code> (Merge a new request with an already existing one)
</li><li><code>libicd_policy_ask.so</code> (Request 'Select connection' dialog from UI)
</li><li><code>libicd_policy_any.so</code> (Any connection)
</li><li><code>libicd_policy_change.so</code> (Change to another connection)
</li><li><code>libicd_policy_add.so</code> (New IAP creation)
</li><li><code>libicd_policy_always_online.so</code> (Always online policy)
</li><li><code>libicd_policy_one.so</code> (One connection only)
</li><li><code>libicd_policy_restart.so</code> (IAP restart policy)
</li><li><code>libicd_policy_nw_disconnect.so</code> (Network disconnect reference count)
</li></ul>
<p>ICD policy plugins all <code>#include policy_api.h</code> (the base API file for ICD policy plugins) and may optionally <code>#include icd_dbus.h</code> (header file for working with D-Bus) and/or <code>icd_log.h</code> (logging code for ICD2 policy plugins).
</p><p>All ICD policy plugins export a function called <code>icd_policy_init</code>. This function takes a variable of type <code>icd_policy_api *</code> plus a number of callbacks that can be saved for later use. Your plugin does whatever initialization it wishes to do (registering D-Bus handlers for example), saves any private data in the "private" field of the <code>icd_policy_api</code> structure (which may be a pointer to a data structure containing a bunch of data) and then fills in any appropriate function members of the <code>icd_policy_api</code> that this plugin wishes to listen for.
</p><p>Different callbacks have different prototypes but all of them get passed the private data stored earlier.
</p><p>I am hoping that this information will be useful to someone and that someone will take it and build new policy plugins with it.
</p>
<a name="External_links"></a><h2><span class="editsection">[<a href="http://wiki.maemo.org/index.php?title=ICD_Policy_Plugins&amp;action=edit&amp;section=1" title="Edit section: External links">edit</a>]</span> <span class="mw-headline"> External links </span></h2>
<p>The policy API header files plus reverse engineered code (that may not be 100% correct) for <code>libicd_policy_one.so</code> and <code>libicd_policy_add.so</code> can be found here: <a href="http://code.google.com/p/icd-policy/source/browse/#svn%2Ftrunk" class="external free" title="http://code.google.com/p/icd-policy/source/browse/#svn%2Ftrunk" rel="nofollow">http://code.google.com/p/icd-policy/source/browse/#svn%2Ftrunk</a>
</p><p>Documentation for all this stuff can be found here: <a href="http://maemo.org/api_refs/5.0/5.0-final/icd2/index.html" class="external free" title="http://maemo.org/api_refs/5.0/5.0-final/icd2/index.html" rel="nofollow">http://maemo.org/api_refs/5.0/5.0-final/icd2/index.html</a>
</p>
<!-- 
NewPP limit report
Preprocessor node count: 20/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
#ifexist count: 0/100
-->

<!-- Saved in parser cache with key mediawiki-mw_:pcache:idhash:4677-0!1!0!!en!2 and timestamp 20120705165638 -->
<div class="printfooter">
Retrieved from "<a href="http://wiki.maemo.org/ICD_Policy_Plugins">http://wiki.maemo.org/ICD_Policy_Plugins</a>"</div>
			<div id="catlinks"><p class="catlinks"><a href="http://wiki.maemo.org/Special:Categories" title="Special:Categories">Categories</a>: <span dir="ltr"><a href="http://wiki.maemo.org/Category:Development" title="Category:Development">Development</a></span> | <span dir="ltr"><a href="http://wiki.maemo.org/Category:Fremantle" title="Category:Fremantle">Fremantle</a></span></p></div>
			<!-- end content -->



                    </div><!-- /main-wrapper -->
                </div><!-- /main --><!-- content end -->

			<div class="visualClear"></div>

        <ul style="clear: left; float: left; display: inline; list-style-type: none;">
<li id="lastmod"> This page was last modified 08:50, 28 January 2011.</li><li id="viewcount">This page has been accessed 574 times.</li>      </ul>
			<div class="visualClear"></div>


			<div id="footer">
                <div id="footer-wrapper-left">
                    <div id="footer-wrapper-right">

			<ul>
                                <li class="first"><a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">All Content CC</a></li>
                <li><a href="http://maemo.org/legal/">Legal</a></li>
                				<li class="privacy"><a href="http://wiki.maemo.org/maemo.org_wiki:Privacy_policy" title="maemo.org wiki:Privacy policy">Privacy policy</a></li>
				<li class="about"><a href="http://wiki.maemo.org/maemo.org_wiki:About" title="maemo.org wiki:About">About maemo.org wiki</a></li>
                <li>Powered by <a href="http://www.mediawiki.org/">MediaWiki</a></li>
			</ul>
                    </div>
                </div>
		</div>
		
	
		
</div>
<!-- Served in 0.154 secs. -->

        </div><!-- container -->

    

</body>
</html>
